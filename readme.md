# YOLOv12 电子元件标签字符识别 (附带已标注数据集)

本项目提供了一套完整的、基于 **YOLOv12** 的电子元件标签识别方案。最核心的优势在于**项目内包含了一份高质量、已完成标注的电子元件数据集**，您可以直接跳过繁琐的数据准备阶段，立即开始模型训练或 K230 端侧部署。

## 💎 项目核心资产：已标注数据集

本项目包含一份经过人工校验的电子元件标签数据集，支持识别 20 种常见元件的数值与规格。

* **数据状态**：已完成标注 (YOLO txt格式)
* **数据位置**：`dataset_org/` 目录下
  * `dataset_org/images/`：原始图像文件
  * `dataset_org/labels/`：对应的标注文件
* **应用场景**：直接用于训练 YOLOv12 模型，识别电阻阻值、电容容值等丝印信息。

---

## 📂 项目结构

**Plaintext**

```
.
├── dataset_org/          # [核心] 已标注好的原始数据集（含图片和txt标签）
├── dataset/              # [自动生成] 运行脚本后生成的训练专用数据集
├── data.yaml             # YOLO 训练配置文件（已定义好20个类别）
├── data_split.py         # 一键划分脚本（自动将 dataset_org 划分为训练/验证/测试集）
├── train.py              # 模型训练脚本（默认 YOLOv12m，1000 epochs）
├── pridect.py            # PC 端推理验证脚本
├── K230.py               # K230 开发板 MicroPython 部署脚本
├── requirements.txt      # Python 依赖环境
└── README.md             # 说明文档
```

---

## 🚀 极速上手指南

### 1. 环境安装

配置 Python 环境及依赖库：

**Bash**

```
pip install -r requirements.txt
```

### 2. 数据集一键划分

虽然数据集已经标注好，但为了训练效果，我们需要将其规范化为 YOLO 训练所需的目录结构。

运行以下脚本，自动按 **7:2:1** 的比例将 `dataset_org` 中的数据随机划分为训练集、验证集和测试集：

**Bash**

```
python data_split.py
```

*执行后，您会看到根目录下生成了一个新的 `dataset` 文件夹，里面包含了 `train`, `valid`, `test` 子目录。*

### 3. 开始训练

无需修改代码，直接运行训练脚本。脚本默认加载 `yolo12m.pt` 预训练权重，并针对 `320x320` 尺寸进行微调：

**Bash**

```
python train.py
```

*注意：在运行前，请确保 `data.yaml` 中的路径已修改为您本地的绝对路径。*

### 4. 验证与推理

训练完成后，使用 `pridect.py` 脚本加载您训练好的 `best.pt` 模型，对测试集进行验证：

**Bash**

```
python pridect.py
```

*脚本会自动保存推理结果图片，方便您直观评估识别准确率。*

---

## ⚡ K230 端侧部署 (可选)

如果您需要将模型部署到 Canaan K230/K230D 开发板，本项目提供了完整的部署代码。

1. **模型转换**：使用 nncase 工具将训练好的 `best.pt` 转换为 `.kmodel` 文件。
2. **文件传输**：将 `.kmodel` 文件和 `K230.py` 脚本传入开发板。
3. **运行识别**：
   **Python**

   ```
   python K230.py
   ```

   * **防抖优化**：K230 代码内置了连续识别算法，只有当同一个标签数值（如 "10kR"）**连续成功识别 3 次**以上时，才会显示结果，有效防止误检闪烁。
   * **显示模式**：支持 HDMI 和 LCD 双输出，默认为 LCD 模式。

---

## 🏷️ 数据集支持的 20 类元件

数据集已包含以下 20 种电子元件标签的标注信息：


| **阻值/容值**     | **类型** | **阻值/容值**     | **类型** |
| ----------------- | -------- | ----------------- | -------- |
| **3.3kΩ**(3.3kO) | 电阻     | **3.3μH**(3.3uH) | 电感     |
| **1.2Ω**(1.2R)   | 电阻     | **200kΩ**(200kR) | 电阻     |
| **10nF**          | 电容     | **1kΩ**(1kR)     | 电阻     |
| **22μF**         | 电容     | **0Ω**(0R)       | 跳线     |
| **4.7μH**(4.7uH) | 电感     | **5.1Ω**(5.1R)   | 电阻     |
| **330Ω**(330R)   | 电阻     | **2.7kΩ**(2.7kR) | 电阻     |
| **4.7Ω**(4.7R)   | 电阻     | **LED**           | 发光管   |
| **100nF**         | 电容     | **10kΩ**(10kR)   | 电阻     |
| **10pF**          | 电容     | **2.2kΩ**(2.2kR) | 电阻     |
| **4.7μF**        | 电容     | **560pF**         | 电容     |

---

## ⚠️ 注意事项

1. **路径配置**：请务必修改 `data.yaml` 中的 `train`, `val`, `test` 路径为您的实际绝对路径，否则 YOLO 无法找到图片。
2. **图像尺寸**：为了适配 K230 的 NPU 性能，本项目全流程（训练、推理、部署）统一锁定图像输入尺寸为 **320x320**。
